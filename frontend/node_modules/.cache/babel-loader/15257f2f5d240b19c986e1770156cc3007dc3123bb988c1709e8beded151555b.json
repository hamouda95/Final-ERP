{"ast":null,"code":"import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\n// Auth Store\nexport const useAuthStore = create(persist(set => ({\n  user: null,\n  token: null,\n  isAuthenticated: false,\n  login: (user, token) => set({\n    user,\n    token,\n    isAuthenticated: true\n  }),\n  logout: () => set({\n    user: null,\n    token: null,\n    isAuthenticated: false\n  }),\n  updateUser: user => set({\n    user\n  })\n}), {\n  name: 'auth-storage'\n}));\n\n// Cart Store\nexport const useCartStore = create((set, get) => ({\n  items: [],\n  selectedStore: 'ville_avray',\n  selectedClient: null,\n  setSelectedStore: store => set({\n    selectedStore: store\n  }),\n  setSelectedClient: client => set({\n    selectedClient: client\n  }),\n  addItem: (product, quantity = 1) => {\n    const {\n      items\n    } = get();\n    const existingItem = items.find(item => item.product.id === product.id);\n    if (existingItem) {\n      set({\n        items: items.map(item => item.product.id === product.id ? {\n          ...item,\n          quantity: item.quantity + quantity\n        } : item)\n      });\n    } else {\n      set({\n        items: [...items, {\n          product,\n          quantity\n        }]\n      });\n    }\n  },\n  removeItem: productId => set(state => ({\n    items: state.items.filter(item => item.product.id !== productId)\n  })),\n  updateQuantity: (productId, quantity) => set(state => ({\n    items: state.items.map(item => item.product.id === productId ? {\n      ...item,\n      quantity\n    } : item)\n  })),\n  clearCart: () => set({\n    items: [],\n    selectedClient: null\n  }),\n  getTotal: () => {\n    const {\n      items\n    } = get();\n    return items.reduce((total, item) => total + item.product.price_ttc * item.quantity, 0);\n  },\n  getTotalHT: () => {\n    const {\n      items\n    } = get();\n    return items.reduce((total, item) => total + item.product.price_ht * item.quantity, 0);\n  }\n}));\n\n// Products Store\nexport const useProductsStore = create(set => ({\n  products: [],\n  viewMode: 'grid',\n  searchQuery: '',\n  selectedCategory: null,\n  setProducts: products => set({\n    products\n  }),\n  setViewMode: mode => set({\n    viewMode: mode\n  }),\n  setSearchQuery: query => set({\n    searchQuery: query\n  }),\n  setSelectedCategory: category => set({\n    selectedCategory: category\n  }),\n  getFilteredProducts: () => {\n    const {\n      products,\n      searchQuery,\n      selectedCategory\n    } = set.getState();\n    return products.filter(product => {\n      var _product$category;\n      const matchesSearch = product.name.toLowerCase().includes(searchQuery.toLowerCase()) || product.reference.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesCategory = !selectedCategory || ((_product$category = product.category) === null || _product$category === void 0 ? void 0 : _product$category.id) === selectedCategory;\n      return matchesSearch && matchesCategory && product.is_visible;\n    });\n  }\n}));","map":{"version":3,"names":["create","persist","useAuthStore","set","user","token","isAuthenticated","login","logout","updateUser","name","useCartStore","get","items","selectedStore","selectedClient","setSelectedStore","store","setSelectedClient","client","addItem","product","quantity","existingItem","find","item","id","map","removeItem","productId","state","filter","updateQuantity","clearCart","getTotal","reduce","total","price_ttc","getTotalHT","price_ht","useProductsStore","products","viewMode","searchQuery","selectedCategory","setProducts","setViewMode","mode","setSearchQuery","query","setSelectedCategory","category","getFilteredProducts","getState","_product$category","matchesSearch","toLowerCase","includes","reference","matchesCategory","is_visible"],"sources":["C:/Users/LENOVO/Downloads/bike-erp-complet/frontend/src/store/index.js"],"sourcesContent":["import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\n// Auth Store\nexport const useAuthStore = create(\n  persist(\n    (set) => ({\n      user: null,\n      token: null,\n      isAuthenticated: false,\n      login: (user, token) => set({ user, token, isAuthenticated: true }),\n      logout: () => set({ user: null, token: null, isAuthenticated: false }),\n      updateUser: (user) => set({ user }),\n    }),\n    {\n      name: 'auth-storage',\n    }\n  )\n);\n\n// Cart Store\nexport const useCartStore = create((set, get) => ({\n  items: [],\n  selectedStore: 'ville_avray',\n  selectedClient: null,\n  \n  setSelectedStore: (store) => set({ selectedStore: store }),\n  setSelectedClient: (client) => set({ selectedClient: client }),\n  \n  addItem: (product, quantity = 1) => {\n    const { items } = get();\n    const existingItem = items.find((item) => item.product.id === product.id);\n    \n    if (existingItem) {\n      set({\n        items: items.map((item) =>\n          item.product.id === product.id\n            ? { ...item, quantity: item.quantity + quantity }\n            : item\n        ),\n      });\n    } else {\n      set({ items: [...items, { product, quantity }] });\n    }\n  },\n  \n  removeItem: (productId) =>\n    set((state) => ({\n      items: state.items.filter((item) => item.product.id !== productId),\n    })),\n  \n  updateQuantity: (productId, quantity) =>\n    set((state) => ({\n      items: state.items.map((item) =>\n        item.product.id === productId ? { ...item, quantity } : item\n      ),\n    })),\n  \n  clearCart: () => set({ items: [], selectedClient: null }),\n  \n  getTotal: () => {\n    const { items } = get();\n    return items.reduce(\n      (total, item) => total + item.product.price_ttc * item.quantity,\n      0\n    );\n  },\n  \n  getTotalHT: () => {\n    const { items } = get();\n    return items.reduce(\n      (total, item) => total + item.product.price_ht * item.quantity,\n      0\n    );\n  },\n}));\n\n// Products Store\nexport const useProductsStore = create((set) => ({\n  products: [],\n  viewMode: 'grid',\n  searchQuery: '',\n  selectedCategory: null,\n  \n  setProducts: (products) => set({ products }),\n  setViewMode: (mode) => set({ viewMode: mode }),\n  setSearchQuery: (query) => set({ searchQuery: query }),\n  setSelectedCategory: (category) => set({ selectedCategory: category }),\n  \n  getFilteredProducts: () => {\n    const { products, searchQuery, selectedCategory } = set.getState();\n    return products.filter((product) => {\n      const matchesSearch =\n        product.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n        product.reference.toLowerCase().includes(searchQuery.toLowerCase());\n      const matchesCategory =\n        !selectedCategory || product.category?.id === selectedCategory;\n      return matchesSearch && matchesCategory && product.is_visible;\n    });\n  },\n}));\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}